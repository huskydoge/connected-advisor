{
    "sourceFile": "src/pages/api/addPaper.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1713802335689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1713802346133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,39 @@\n+import type { NextApiRequest, NextApiResponse } from \"next\";\n+import { MongoClient } from \"mongodb\";\n+\n+// MongoDB URL and database name\n+const MONGO_URL = process.env.MONGO_URL || \"\"; // Use the environment variable\n+const DB_NAME = \"tmp-papers\";\n+\n+// Function to connect to the database\n+async function connectToDatabase() {\n+  const client = new MongoClient(MONGO_URL);\n+  await client.connect();\n+  return client.db(DB_NAME);\n+}\n+\n+// API handler function\n+export default async function handler(\n+  req: NextApiRequest,\n+  res: NextApiResponse\n+) {\n+  console.log(\"Received request:\", req.method, req.body);\n+  if (req.method === \"POST\") {\n+    try {\n+      const db = await connectToDatabase();\n+      console.log(\"Database connected\");\n+      const collection = db.collection(\"connections\");\n+      const result = await collection.insertOne(req.body);\n+      console.log(\"Document inserted\", result);\n+      res.status(200).json({ ...result, _id: result.insertedId });\n+    } catch (error) {\n+      console.error(\"Error occurred:\", error);\n+      res\n+        .status(500)\n+        .json({ error: \"Unable to connect to the database or insert data\" });\n+    }\n+  } else {\n+    res.setHeader(\"Allow\", [\"POST\"]);\n+    res.status(405).end(`Method ${req.method} Not Allowed`);\n+  }\n+}\n"
                },
                {
                    "date": 1713802834793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import { MongoClient } from \"mongodb\";\n \n // MongoDB URL and database name\n const MONGO_URL = process.env.MONGO_URL || \"\"; // Use the environment variable\n-const DB_NAME = \"tmp-papers\";\n+const DB_NAME = \"ConnectedAdvisor\";\n \n // Function to connect to the database\n async function connectToDatabase() {\n   const client = new MongoClient(MONGO_URL);\n@@ -36,43 +36,4 @@\n     res.setHeader(\"Allow\", [\"POST\"]);\n     res.status(405).end(`Method ${req.method} Not Allowed`);\n   }\n }\n-import type { NextApiRequest, NextApiResponse } from \"next\";\n-import { MongoClient } from \"mongodb\";\n-\n-// MongoDB URL and database name\n-const MONGO_URL = process.env.MONGO_URL || \"\"; // Use the environment variable\n-const DB_NAME = \"tmp-papers\";\n-\n-// Function to connect to the database\n-async function connectToDatabase() {\n-  const client = new MongoClient(MONGO_URL);\n-  await client.connect();\n-  return client.db(DB_NAME);\n-}\n-\n-// API handler function\n-export default async function handler(\n-  req: NextApiRequest,\n-  res: NextApiResponse\n-) {\n-  console.log(\"Received request:\", req.method, req.body);\n-  if (req.method === \"POST\") {\n-    try {\n-      const db = await connectToDatabase();\n-      console.log(\"Database connected\");\n-      const collection = db.collection(\"connections\");\n-      const result = await collection.insertOne(req.body);\n-      console.log(\"Document inserted\", result);\n-      res.status(200).json({ ...result, _id: result.insertedId });\n-    } catch (error) {\n-      console.error(\"Error occurred:\", error);\n-      res\n-        .status(500)\n-        .json({ error: \"Unable to connect to the database or insert data\" });\n-    }\n-  } else {\n-    res.setHeader(\"Allow\", [\"POST\"]);\n-    res.status(405).end(`Method ${req.method} Not Allowed`);\n-  }\n-}\n"
                },
                {
                    "date": 1713802855118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n \n // MongoDB URL and database name\n const MONGO_URL = process.env.MONGO_URL || \"\"; // Use the environment variable\n const DB_NAME = \"ConnectedAdvisor\";\n+const COLLECTION = \"tmp-papers\";\n \n // Function to connect to the database\n async function connectToDatabase() {\n   const client = new MongoClient(MONGO_URL);\n"
                },
                {
                    "date": 1713802860817,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,9 @@\n   if (req.method === \"POST\") {\n     try {\n       const db = await connectToDatabase();\n       console.log(\"Database connected\");\n-      const collection = db.collection(\"connections\");\n+      const collection = db.collection(COLLECTION);\n       const result = await collection.insertOne(req.body);\n       console.log(\"Document inserted\", result);\n       res.status(200).json({ ...result, _id: result.insertedId });\n     } catch (error) {\n"
                }
            ],
            "date": 1713802335689,
            "name": "Commit-0",
            "content": "import type { NextApiRequest, NextApiResponse } from \"next\";\nimport { MongoClient } from \"mongodb\";\n\n// MongoDB URL and database name\nconst MONGO_URL = process.env.MONGO_URL || \"\"; // Use the environment variable\nconst DB_NAME = \"tmp-papers\";\n\n// Function to connect to the database\nasync function connectToDatabase() {\n  const client = new MongoClient(MONGO_URL);\n  await client.connect();\n  return client.db(DB_NAME);\n}\n\n// API handler function\nexport default async function handler(\n  req: NextApiRequest,\n  res: NextApiResponse\n) {\n  console.log(\"Received request:\", req.method, req.body);\n  if (req.method === \"POST\") {\n    try {\n      const db = await connectToDatabase();\n      console.log(\"Database connected\");\n      const collection = db.collection(\"connections\");\n      const result = await collection.insertOne(req.body);\n      console.log(\"Document inserted\", result);\n      res.status(200).json({ ...result, _id: result.insertedId });\n    } catch (error) {\n      console.error(\"Error occurred:\", error);\n      res\n        .status(500)\n        .json({ error: \"Unable to connect to the database or insert data\" });\n    }\n  } else {\n    res.setHeader(\"Allow\", [\"POST\"]);\n    res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n}\n"
        }
    ]
}