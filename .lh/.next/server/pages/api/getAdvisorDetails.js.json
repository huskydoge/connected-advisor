{
    "sourceFile": ".next/server/pages/api/getAdvisorDetails.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1713787107924,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1713792047169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,60 +7,75 @@\n  * or disable the default devtool with \"devtool: false\".\n  * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n  */\n (() => {\n-var exports = {};\n-exports.id = \"pages/api/getAdvisorDetails\";\n-exports.ids = [\"pages/api/getAdvisorDetails\"];\n-exports.modules = {\n-\n-/***/ \"mongodb\":\n-/*!**************************!*\\\n+  var exports = {};\n+  exports.id = \"pages/api/getAdvisorDetails\";\n+  exports.ids = [\"pages/api/getAdvisorDetails\"];\n+  exports.modules = {\n+    /***/ mongodb:\n+      /*!**************************!*\\\n   !*** external \"mongodb\" ***!\n   \\**************************/\n-/***/ ((module) => {\n+      /***/ (module) => {\n+        module.exports = require(\"mongodb\");\n \n-module.exports = require(\"mongodb\");\n+        /***/\n+      },\n \n-/***/ }),\n-\n-/***/ \"next/dist/compiled/next-server/pages-api.runtime.dev.js\":\n-/*!**************************************************************************!*\\\n+    /***/ \"next/dist/compiled/next-server/pages-api.runtime.dev.js\":\n+      /*!**************************************************************************!*\\\n   !*** external \"next/dist/compiled/next-server/pages-api.runtime.dev.js\" ***!\n   \\**************************************************************************/\n-/***/ ((module) => {\n+      /***/ (module) => {\n+        module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.dev.js\");\n \n-module.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.dev.js\");\n+        /***/\n+      },\n \n-/***/ }),\n-\n-/***/ \"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\":\n-/*!***********************************************************************************************************************************************************************************************************************************************!*\\\n+    /***/ \"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\":\n+      /*!***********************************************************************************************************************************************************************************************************************************************!*\\\n   !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D! ***!\n   \\***********************************************************************************************************************************************************************************************************************************************/\n-/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n+      /***/ (\n+        __unused_webpack_module,\n+        __webpack_exports__,\n+        __webpack_require__\n+      ) => {\n+        eval(\n+          '__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   config: () => (/* binding */ config),\\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\\n/* harmony export */ });\\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\\n/* harmony import */ var _src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/getAdvisorDetails.tsx */ \"(api)/./src/pages/api/getAdvisorDetails.tsx\");\\n\\n\\n\\n// Import the userland code.\\n\\n// Re-export the handler (should be the default export).\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\\n// Re-export config.\\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__, \"config\");\\n// Create and export the route module that will be consumed.\\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\\n    definition: {\\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\\n        page: \"/api/getAdvisorDetails\",\\n        pathname: \"/api/getAdvisorDetails\",\\n        // The following aren\\'t used in production.\\n        bundlePath: \"\",\\n        filename: \"\"\\n    },\\n    userland: _src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__\\n});\\n\\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdldEFkdmlzb3JEZXRhaWxzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZnZXRBZHZpc29yRGV0YWlscy50c3gmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDa0U7QUFDbEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25uZWN0ZWQtYWR2aXNvci8/ZTBjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9nZXRBZHZpc29yRGV0YWlscy50c3hcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZXRBZHZpc29yRGV0YWlsc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dldEFkdmlzb3JEZXRhaWxzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\\n'\n+        );\n\\ No newline at end of file\n \n-eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   config: () => (/* binding */ config),\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__),\\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\\n/* harmony export */ });\\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \\\"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\\\");\\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \\\"(api)/./node_modules/next/dist/server/future/route-kind.js\\\");\\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \\\"(api)/./node_modules/next/dist/build/templates/helpers.js\\\");\\n/* harmony import */ var _src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/getAdvisorDetails.tsx */ \\\"(api)/./src/pages/api/getAdvisorDetails.tsx\\\");\\n\\n\\n\\n// Import the userland code.\\n\\n// Re-export the handler (should be the default export).\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__, \\\"default\\\"));\\n// Re-export config.\\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__, \\\"config\\\");\\n// Create and export the route module that will be consumed.\\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\\n    definition: {\\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\\n        page: \\\"/api/getAdvisorDetails\\\",\\n        pathname: \\\"/api/getAdvisorDetails\\\",\\n        // The following aren't used in production.\\n        bundlePath: \\\"\\\",\\n        filename: \\\"\\\"\\n    },\\n    userland: _src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__\\n});\\n\\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdldEFkdmlzb3JEZXRhaWxzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZnZXRBZHZpc29yRGV0YWlscy50c3gmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDa0U7QUFDbEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25uZWN0ZWQtYWR2aXNvci8/ZTBjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9nZXRBZHZpc29yRGV0YWlscy50c3hcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZXRBZHZpc29yRGV0YWlsc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dldEFkdmlzb3JEZXRhaWxzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\\n\");\n+        /***/\n+      },\n \n-/***/ }),\n-\n-/***/ \"(api)/./src/pages/api/getAdvisorDetails.tsx\":\n-/*!*********************************************!*\\\n+    /***/ \"(api)/./src/pages/api/getAdvisorDetails.tsx\":\n+      /*!*********************************************!*\\\n   !*** ./src/pages/api/getAdvisorDetails.tsx ***!\n   \\*********************************************/\n-/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n+      /***/ (\n+        __unused_webpack_module,\n+        __webpack_exports__,\n+        __webpack_require__\n+      ) => {\n+        eval(\n+          '__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \"default\": () => (/* binding */ handler)\\n/* harmony export */ });\\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\\n// pages/api/getAdvisorDetails.tsx\\n\\n// 环境变量中获取 MongoDB 的连接 URL\\nconst MONGO_URL = process.env.MONGO_URL;\\nconst DB_NAME = \"ConnectedAdvisor\";\\nasync function connectToDatabase() {\\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(MONGO_URL);\\n    await client.connect();\\n    const db = client.db(DB_NAME);\\n    return {\\n        db,\\n        client\\n    };\\n}\\nasync function getAdvisorDetails(advisorId) {\\n    const { db, client } = await connectToDatabase();\\n    try {\\n        const advisor = await db.collection(\"AdvisorTable\").find({\\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(advisorId)\\n        }).toArray();\\n        if (!advisor) {\\n            return null;\\n        }\\n        const connectionIds = advisor[0].connections.map((id)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id));\\n        const connections = await db.collection(\"connections\").find({\\n            _id: {\\n                $in: connectionIds\\n            }\\n        }).toArray();\\n        // 首先收集所有需要查询的relation ID和paper ID\\n        const relationIds = [];\\n        const paperIds = [];\\n        for (const conn of connections){\\n            relationIds.push(...conn.relations.map((id)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)));\\n            paperIds.push(...conn[\"collaborate-papers\"].map((paper)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(paper)));\\n        }\\n        // 使用 $in 操作符一次性查询所有relations\\n        const relations = await db.collection(\"relations\").find({\\n            _id: {\\n                $in: relationIds\\n            }\\n        }).toArray();\\n        console.log(\"relations\", relations);\\n        // 使用 $in 操作符一次性查询所有papers\\n        const papers = await db.collection(\"tmp-papers\").find({\\n            _id: {\\n                $in: paperIds\\n            }\\n        }).toArray();\\n        console.log(\"papers\", papers);\\n        let finalConnections = [];\\n        for (const conn of connections){\\n            const relationDetails = conn.relations.map((relId)=>{\\n                // 在已查询的关系数组中找到匹配的关系对象\\n                const rel = relations.find((relation)=>relation._id.equals(relId));\\n                if (!rel) {\\n                    return null;\\n                }\\n                if (rel[\"id-1\"] === advisorId) {\\n                    return {\\n                        class: rel.type,\\n                        role: rel[\"role-1\"],\\n                        duration: rel.duration\\n                    };\\n                } else {\\n                    return {\\n                        class: rel.type,\\n                        role: rel[\"role-2\"],\\n                        duration: rel.duration\\n                    };\\n                }\\n            });\\n            const collaborateDetails = conn[\"collaborate-papers\"].map((paperId)=>{\\n                if (!paperId) {\\n                    return null;\\n                }\\n                const paper = papers.find((paper)=>paper._id.equals(paperId));\\n                return {\\n                    papername: paper?.name,\\n                    year: paper?.year,\\n                    url: paper?.url\\n                };\\n            });\\n            let connected_advisor_id;\\n            if (conn[\"id-1\"] === advisorId) {\\n                connected_advisor_id = conn[\"id-2\"];\\n            } else {\\n                connected_advisor_id = conn[\"id-1\"];\\n            }\\n            let tmp = {\\n                _id: connected_advisor_id,\\n                relation: relationDetails,\\n                collaborations: collaborateDetails,\\n                lastestCollaboration: Math.max(...collaborateDetails.map((collab)=>collab.year)) ? Math.max(...collaborateDetails.map((collab)=>collab.year)) : 2024,\\n                relationFactor: 1\\n            };\\n            if (tmp[\"lastestCollaboration\"] === -Infinity) {\\n                tmp[\"lastestCollaboration\"] = 2024;\\n            }\\n            console.log(\"tmp\", tmp);\\n            finalConnections.push(tmp);\\n        }\\n        let finalAdvisor = {\\n            _id: advisor[0]._id,\\n            name: advisor[0].name,\\n            tags: advisor[0].tags,\\n            affiliation: advisor[0].affiliation,\\n            position: advisor[0].position,\\n            connections: finalConnections,\\n            avatar: advisor[0].picture,\\n            twitter: advisor[0].contacts.twitter,\\n            email: advisor[0].contacts.email,\\n            homepage: advisor[0].homepage,\\n            github: advisor[0].contacts.github,\\n            description: advisor[0].descriptions\\n        };\\n        return finalAdvisor;\\n    } catch (error) {\\n        console.error(\"Error fetching advisor details:\", error);\\n        return null;\\n    } finally{\\n        client.close();\\n    }\\n}\\nasync function handler(req, res) {\\n    if (req.method !== \"POST\") {\\n        res.setHeader(\"Allow\", [\\n            \"POST\"\\n        ]);\\n        res.status(405).end(`Method ${req.method} Not Allowed`);\\n        return;\\n    }\\n    const { _id } = req.body;\\n    console.log(\"_id\", _id);\\n    if (!_id) {\\n        res.status(400).json({\\n            error: \"Advisor ID is required\"\\n        });\\n        return;\\n    }\\n    const advisorDetails = await getAdvisorDetails(_id);\\n    if (advisorDetails) {\\n        res.status(200).json(advisorDetails);\\n    } else {\\n        res.status(404).json({\\n            error: \"Advisor not found\"\\n        });\\n    }\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2dldEFkdmlzb3JEZXRhaWxzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxrQ0FBa0M7QUFHYztBQUVoRCwwQkFBMEI7QUFDMUIsTUFBTUUsWUFBWUMsUUFBUUMsR0FBRyxDQUFDRixTQUFTO0FBQ3ZDLE1BQU1HLFVBQVU7QUFFaEIsZUFBZUM7SUFDYixNQUFNQyxTQUFTLElBQUlQLGdEQUFXQSxDQUFDRTtJQUMvQixNQUFNSyxPQUFPQyxPQUFPO0lBQ3BCLE1BQU1DLEtBQUtGLE9BQU9FLEVBQUUsQ0FBQ0o7SUFDckIsT0FBTztRQUFFSTtRQUFJRjtJQUFPO0FBQ3RCO0FBRUEsZUFBZUcsa0JBQWtCQyxTQUFpQjtJQUNoRCxNQUFNLEVBQUVGLEVBQUUsRUFBRUYsTUFBTSxFQUFFLEdBQUcsTUFBTUQ7SUFFN0IsSUFBSTtRQUNGLE1BQU1NLFVBQVUsTUFBTUgsR0FDbkJJLFVBQVUsQ0FBQyxnQkFDWEMsSUFBSSxDQUFDO1lBQUVDLEtBQUssSUFBSWQsNkNBQVFBLENBQUNVO1FBQVcsR0FDcENLLE9BQU87UUFDVixJQUFJLENBQUNKLFNBQVM7WUFDWixPQUFPO1FBQ1Q7UUFFQSxNQUFNSyxnQkFBZ0JMLE9BQU8sQ0FBQyxFQUFFLENBQUNNLFdBQVcsQ0FBQ0MsR0FBRyxDQUM5QyxDQUFDQyxLQUFlLElBQUluQiw2Q0FBUUEsQ0FBQ21CO1FBRS9CLE1BQU1GLGNBQWMsTUFBTVQsR0FDdkJJLFVBQVUsQ0FBQyxlQUNYQyxJQUFJLENBQUM7WUFDSkMsS0FBSztnQkFBRU0sS0FBS0o7WUFBYztRQUM1QixHQUNDRCxPQUFPO1FBRVYsa0NBQWtDO1FBQ2xDLE1BQU1NLGNBQWMsRUFBRTtRQUN0QixNQUFNQyxXQUFXLEVBQUU7UUFFbkIsS0FBSyxNQUFNQyxRQUFRTixZQUFhO1lBQzlCSSxZQUFZRyxJQUFJLElBQUlELEtBQUtFLFNBQVMsQ0FBQ1AsR0FBRyxDQUFDLENBQUNDLEtBQU8sSUFBSW5CLDZDQUFRQSxDQUFDbUI7WUFD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QUlHLE1BQU0sQ0FBQyxLQUFLRyxJQUFJLENBQUNDO0lBQ3ZCLE9BQU87UUFDTFAsSUFBSUcsTUFBTSxDQUFDLEtBQUtHLElBQUksQ0FBQztZQUFFVixPQUFPO1FBQW9CO0lBQ3BEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25uZWN0ZWQtYWR2aXNvci8uL3NyYy9wYWdlcy9hcGkvZ2V0QWR2aXNvckRldGFpbHMudHN4P2EzOTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2dldEFkdmlzb3JEZXRhaWxzLnRzeFxuXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IE1vbmdvQ2xpZW50LCBPYmplY3RJZCB9IGZyb20gXCJtb25nb2RiXCI7XG5cbi8vIOeOr+Wig+WPmOmHj+S4reiOt+WPliBNb25nb0RCIOeahOi/nuaOpSBVUkxcbmNvbnN0IE1PTkdPX1VSTCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbmNvbnN0IERCX05BTUUgPSBcIkNvbm5lY3RlZEFkdmlzb3JcIjtcblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChNT05HT19VUkwpO1xuICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICBjb25zdCBkYiA9IGNsaWVudC5kYihEQl9OQU1FKTtcbiAgcmV0dXJuIHsgZGIsIGNsaWVudCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRBZHZpc29yRGV0YWlscyhhZHZpc29ySWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRiLCBjbGllbnQgfSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBhZHZpc29yID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwiQWR2aXNvclRhYmxlXCIpXG4gICAgICAuZmluZCh7IF9pZDogbmV3IE9iamVjdElkKGFkdmlzb3JJZCkgfSlcbiAgICAgIC50b0FycmF5KCk7XG4gICAgaWYgKCFhZHZpc29yKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb25uZWN0aW9uSWRzID0gYWR2aXNvclswXS5jb25uZWN0aW9ucy5tYXAoXG4gICAgICAoaWQ6IHN0cmluZykgPT4gbmV3IE9iamVjdElkKGlkKVxuICAgICk7XG4gICAgY29uc3QgY29ubmVjdGlvbnMgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJjb25uZWN0aW9uc1wiKVxuICAgICAgLmZpbmQoe1xuICAgICAgICBfaWQ6IHsgJGluOiBjb25uZWN0aW9uSWRzIH0sXG4gICAgICB9KVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIC8vIOmmluWFiOaUtumbhuaJgOaciemcgOimgeafpeivoueahHJlbGF0aW9uIElE5ZKMcGFwZXIgSURcbiAgICBjb25zdCByZWxhdGlvbklkcyA9IFtdO1xuICAgIGNvbnN0IHBhcGVySWRzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGNvbm4gb2YgY29ubmVjdGlvbnMpIHtcbiAgICAgIHJlbGF0aW9uSWRzLnB1c2goLi4uY29ubi5yZWxhdGlvbnMubWFwKChpZCkgPT4gbmV3IE9iamVjdElkKGlkKSkpO1xuICAgICAgcGFwZXJJZHMucHVzaChcbiAgICAgICAgLi4uY29ubltcImNvbGxhYm9yYXRlLXBhcGVyc1wiXS5tYXAoKHBhcGVyKSA9PiBuZXcgT2JqZWN0SWQocGFwZXIpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyDkvb/nlKggJGluIOaTjeS9nOespuS4gOasoeaAp+afpeivouaJgOaciXJlbGF0aW9uc1xuICAgIGNvbnN0IHJlbGF0aW9ucyA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcInJlbGF0aW9uc1wiKVxuICAgICAgLmZpbmQoe1xuICAgICAgICBfaWQ6IHsgJGluOiByZWxhdGlvbklkcyB9LFxuICAgICAgfSlcbiAgICAgIC50b0FycmF5KCk7XG5cbiAgICBjb25zb2xlLmxvZyhcInJlbGF0aW9uc1wiLCByZWxhdGlvbnMpO1xuXG4gICAgLy8g5L2/55SoICRpbiDmk43kvZznrKbkuIDmrKHmgKfmn6Xor6LmiYDmnIlwYXBlcnNcbiAgICBjb25zdCBwYXBlcnMgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ0bXAtcGFwZXJzXCIpXG4gICAgICAuZmluZCh7XG4gICAgICAgIF9pZDogeyAkaW46IHBhcGVySWRzIH0sXG4gICAgICB9KVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIGNvbnNvbGUubG9nKFwicGFwZXJzXCIsIHBhcGVycyk7XG5cbiAgICBsZXQgZmluYWxDb25uZWN0aW9ucyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjb25uIG9mIGNvbm5lY3Rpb25zKSB7XG4gICAgICBjb25zdCByZWxhdGlvbkRldGFpbHMgPSBjb25uLnJlbGF0aW9ucy5tYXAoKHJlbElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgLy8g5Zyo5bey5p+l6K+i55qE5YWz57O75pWw57uE5Lit5om+5Yiw5Yy56YWN55qE5YWz57O75a+56LGhXG4gICAgICAgIGNvbnN0IHJlbCA9IHJlbGF0aW9ucy5maW5kKChyZWxhdGlvbikgPT4gcmVsYXRpb24uX2lkLmVxdWFscyhyZWxJZCkpO1xuICAgICAgICBpZiAoIXJlbCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWxbXCJpZC0xXCJdID09PSBhZHZpc29ySWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xhc3M6IHJlbC50eXBlLFxuICAgICAgICAgICAgcm9sZTogcmVsW1wicm9sZS0xXCJdLFxuICAgICAgICAgICAgZHVyYXRpb246IHJlbC5kdXJhdGlvbixcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbGFzczogcmVsLnR5cGUsXG4gICAgICAgICAgICByb2xlOiByZWxbXCJyb2xlLTJcIl0sXG4gICAgICAgICAgICBkdXJhdGlvbjogcmVsLmR1cmF0aW9uLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgY29sbGFib3JhdGVEZXRhaWxzID0gY29ubltcImNvbGxhYm9yYXRlLXBhcGVyc1wiXS5tYXAoXG4gICAgICAgIChwYXBlcklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAoIXBhcGVySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXBlciA9IHBhcGVycy5maW5kKChwYXBlcikgPT4gcGFwZXIuX2lkLmVxdWFscyhwYXBlcklkKSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcGVybmFtZTogcGFwZXI/Lm5hbWUsXG4gICAgICAgICAgICB5ZWFyOiBwYXBlcj8ueWVhcixcbiAgICAgICAgICAgIHVybDogcGFwZXI/LnVybCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBsZXQgY29ubmVjdGVkX2Fkdmlzb3JfaWQ7XG5cbiAgICAgIGlmIChjb25uW1wiaWQtMVwiXSA9PT0gYWR2aXNvcklkKSB7XG4gICAgICAgIGNvbm5lY3RlZF9hZHZpc29yX2lkID0gY29ubltcImlkLTJcIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25uZWN0ZWRfYWR2aXNvcl9pZCA9IGNvbm5bXCJpZC0xXCJdO1xuICAgICAgfVxuXG4gICAgICBsZXQgdG1wID0ge1xuICAgICAgICBfaWQ6IGNvbm5lY3RlZF9hZHZpc29yX2lkLFxuICAgICAgICByZWxhdGlvbjogcmVsYXRpb25EZXRhaWxzLFxuICAgICAgICBjb2xsYWJvcmF0aW9uczogY29sbGFib3JhdGVEZXRhaWxzLFxuICAgICAgICBsYXN0ZXN0Q29sbGFib3JhdGlvbjogTWF0aC5tYXgoXG4gICAgICAgICAgLi4uY29sbGFib3JhdGVEZXRhaWxzLm1hcCgoY29sbGFiOiBhbnkpID0+IGNvbGxhYi55ZWFyKVxuICAgICAgICApXG4gICAgICAgICAgPyBNYXRoLm1heCguLi5jb2xsYWJvcmF0ZURldGFpbHMubWFwKChjb2xsYWI6IGFueSkgPT4gY29sbGFiLnllYXIpKVxuICAgICAgICAgIDogMjAyNCwgLy8gVE9ET1xuICAgICAgICByZWxhdGlvbkZhY3RvcjogMSxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0bXBbXCJsYXN0ZXN0Q29sbGFib3JhdGlvblwiXSA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgIHRtcFtcImxhc3Rlc3RDb2xsYWJvcmF0aW9uXCJdID0gMjAyNDtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJ0bXBcIiwgdG1wKTtcblxuICAgICAgZmluYWxDb25uZWN0aW9ucy5wdXNoKHRtcCk7XG4gICAgfVxuXG4gICAgbGV0IGZpbmFsQWR2aXNvciA9IHtcbiAgICAgIF9pZDogYWR2aXNvclswXS5faWQsXG4gICAgICBuYW1lOiBhZHZpc29yWzBdLm5hbWUsXG4gICAgICB0YWdzOiBhZHZpc29yWzBdLnRhZ3MsXG4gICAgICBhZmZpbGlhdGlvbjogYWR2aXNvclswXS5hZmZpbGlhdGlvbixcbiAgICAgIHBvc2l0aW9uOiBhZHZpc29yWzBdLnBvc2l0aW9uLFxuICAgICAgY29ubmVjdGlvbnM6IGZpbmFsQ29ubmVjdGlvbnMsXG4gICAgICBhdmF0YXI6IGFkdmlzb3JbMF0ucGljdHVyZSxcbiAgICAgIHR3aXR0ZXI6IGFkdmlzb3JbMF0uY29udGFjdHMudHdpdHRlcixcbiAgICAgIGVtYWlsOiBhZHZpc29yWzBdLmNvbnRhY3RzLmVtYWlsLFxuICAgICAgd2Vic2l0ZTogYWR2aXNvclswXS5ob21lcGFnZSxcbiAgICAgIGdpdGh1YjogYWR2aXNvclswXS5jb250YWN0cy5naXRodWIsXG4gICAgICBkZXNjcmlwdGlvbjogYWR2aXNvclswXS5kZXNjcmlwdGlvbnMsXG4gICAgfTtcbiAgICByZXR1cm4gZmluYWxBZHZpc29yO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBhZHZpc29yIGRldGFpbHM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZVxuKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSBcIlBPU1RcIikge1xuICAgIHJlcy5zZXRIZWFkZXIoXCJBbGxvd1wiLCBbXCJQT1NUXCJdKTtcbiAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHsgX2lkIH0gPSByZXEuYm9keTtcbiAgY29uc29sZS5sb2coXCJfaWRcIiwgX2lkKTtcbiAgaWYgKCFfaWQpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkFkdmlzb3IgSUQgaXMgcmVxdWlyZWRcIiB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBhZHZpc29yRGV0YWlscyA9IGF3YWl0IGdldEFkdmlzb3JEZXRhaWxzKF9pZCk7XG4gIGlmIChhZHZpc29yRGV0YWlscykge1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGFkdmlzb3JEZXRhaWxzKTtcbiAgfSBlbHNlIHtcbiAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIkFkdmlzb3Igbm90IGZvdW5kXCIgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsIk9iamVjdElkIiwiTU9OR09fVVJMIiwicHJvY2VzcyIsImVudiIsIkRCX05BTUUiLCJjb25uZWN0VG9EYXRhYmFzZSIsImNsaWVudCIsImNvbm5lY3QiLCJkYiIsImdldEFkdmlzb3JEZXRhaWxzIiwiYWR2aXNvcklkIiwiYWR2aXNvciIsImNvbGxlY3Rpb24iLCJmaW5kIiwiX2lkIiwidG9BcnJheSIsImNvbm5lY3Rpb25JZHMiLCJjb25uZWN0aW9ucyIsIm1hcCIsImlkIiwiJGluIiwicmVsYXRpb25JZHMiLCJwYXBlcklkcyIsImNvbm4iLCJwdXNoIiwicmVsYXRpb25zIiwicGFwZXIiLCJjb25zb2xlIiwibG9nIiwicGFwZXJzIiwiZmluYWxDb25uZWN0aW9ucyIsInJlbGF0aW9uRGV0YWlscyIsInJlbElkIiwicmVsIiwicmVsYXRpb24iLCJlcXVhbHMiLCJjbGFzcyIsInR5cGUiLCJyb2xlIiwiZHVyYXRpb24iLCJjb2xsYWJvcmF0ZURldGFpbHMiLCJwYXBlcklkIiwicGFwZXJuYW1lIiwibmFtZSIsInllYXIiLCJ1cmwiLCJjb25uZWN0ZWRfYWR2aXNvcl9pZCIsInRtcCIsImNvbGxhYm9yYXRpb25zIiwibGFzdGVzdENvbGxhYm9yYXRpb24iLCJNYXRoIiwibWF4IiwiY29sbGFiIiwicmVsYXRpb25GYWN0b3IiLCJJbmZpbml0eSIsImZpbmFsQWR2aXNvciIsInRhZ3MiLCJhZmZpbGlhdGlvbiIsInBvc2l0aW9uIiwiYXZhdGFyIiwicGljdHVyZSIsInR3aXR0ZXIiLCJjb250YWN0cyIsImVtYWlsIiwid2Vic2l0ZSIsImhvbWVwYWdlIiwiZ2l0aHViIiwiZGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbnMiLCJlcnJvciIsImNsb3NlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInNldEhlYWRlciIsInN0YXR1cyIsImVuZCIsImJvZHkiLCJqc29uIiwiYWR2aXNvckRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/getAdvisorDetails.tsx\\n'\n+        );\n \n-eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (/* binding */ handler)\\n/* harmony export */ });\\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \\\"mongodb\\\");\\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\\n// pages/api/getAdvisorDetails.tsx\\n\\n// 环境变量中获取 MongoDB 的连接 URL\\nconst MONGO_URL = process.env.MONGO_URL;\\nconst DB_NAME = \\\"ConnectedAdvisor\\\";\\nasync function connectToDatabase() {\\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(MONGO_URL);\\n    await client.connect();\\n    const db = client.db(DB_NAME);\\n    return {\\n        db,\\n        client\\n    };\\n}\\nasync function getAdvisorDetails(advisorId) {\\n    const { db, client } = await connectToDatabase();\\n    try {\\n        const advisor = await db.collection(\\\"AdvisorTable\\\").find({\\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(advisorId)\\n        }).toArray();\\n        if (!advisor) {\\n            return null;\\n        }\\n        const connectionIds = advisor[0].connections.map((id)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id));\\n        const connections = await db.collection(\\\"connections\\\").find({\\n            _id: {\\n                $in: connectionIds\\n            }\\n        }).toArray();\\n        // 首先收集所有需要查询的relation ID和paper ID\\n        const relationIds = [];\\n        const paperIds = [];\\n        for (const conn of connections){\\n            relationIds.push(...conn.relations.map((id)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)));\\n            paperIds.push(...conn[\\\"collaborate-papers\\\"].map((paper)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(paper)));\\n        }\\n        // 使用 $in 操作符一次性查询所有relations\\n        const relations = await db.collection(\\\"relations\\\").find({\\n            _id: {\\n                $in: relationIds\\n            }\\n        }).toArray();\\n        console.log(\\\"relations\\\", relations);\\n        // 使用 $in 操作符一次性查询所有papers\\n        const papers = await db.collection(\\\"tmp-papers\\\").find({\\n            _id: {\\n                $in: paperIds\\n            }\\n        }).toArray();\\n        console.log(\\\"papers\\\", papers);\\n        let finalConnections = [];\\n        for (const conn of connections){\\n            const relationDetails = conn.relations.map((relId)=>{\\n                // 在已查询的关系数组中找到匹配的关系对象\\n                const rel = relations.find((relation)=>relation._id.equals(relId));\\n                if (!rel) {\\n                    return null;\\n                }\\n                if (rel[\\\"id-1\\\"] === advisorId) {\\n                    return {\\n                        class: rel.type,\\n                        role: rel[\\\"role-1\\\"],\\n                        duration: rel.duration\\n                    };\\n                } else {\\n                    return {\\n                        class: rel.type,\\n                        role: rel[\\\"role-2\\\"],\\n                        duration: rel.duration\\n                    };\\n                }\\n            });\\n            const collaborateDetails = conn[\\\"collaborate-papers\\\"].map((paperId)=>{\\n                if (!paperId) {\\n                    return null;\\n                }\\n                const paper = papers.find((paper)=>paper._id.equals(paperId));\\n                return {\\n                    papername: paper?.name,\\n                    year: paper?.year,\\n                    url: paper?.url\\n                };\\n            });\\n            let connected_advisor_id;\\n            if (conn[\\\"id-1\\\"] === advisorId) {\\n                connected_advisor_id = conn[\\\"id-2\\\"];\\n            } else {\\n                connected_advisor_id = conn[\\\"id-1\\\"];\\n            }\\n            let tmp = {\\n                _id: connected_advisor_id,\\n                relation: relationDetails,\\n                collaborations: collaborateDetails,\\n                lastestCollaboration: Math.max(...collaborateDetails.map((collab)=>collab.year)) ? Math.max(...collaborateDetails.map((collab)=>collab.year)) : 2024,\\n                relationFactor: 1\\n            };\\n            if (tmp[\\\"lastestCollaboration\\\"] === -Infinity) {\\n                tmp[\\\"lastestCollaboration\\\"] = 2024;\\n            }\\n            console.log(\\\"tmp\\\", tmp);\\n            finalConnections.push(tmp);\\n        }\\n        let finalAdvisor = {\\n            _id: advisor[0]._id,\\n            name: advisor[0].name,\\n            tags: advisor[0].tags,\\n            affiliation: advisor[0].affiliation,\\n            position: advisor[0].position,\\n            connections: finalConnections,\\n            avatar: advisor[0].picture,\\n            twitter: advisor[0].contacts.twitter,\\n            email: advisor[0].contacts.email,\\n            homepage: advisor[0].homepage,\\n            github: advisor[0].contacts.github,\\n            description: advisor[0].descriptions\\n        };\\n        return finalAdvisor;\\n    } catch (error) {\\n        console.error(\\\"Error fetching advisor details:\\\", error);\\n        return null;\\n    } finally{\\n        client.close();\\n    }\\n}\\nasync function handler(req, res) {\\n    if (req.method !== \\\"POST\\\") {\\n        res.setHeader(\\\"Allow\\\", [\\n            \\\"POST\\\"\\n        ]);\\n        res.status(405).end(`Method ${req.method} Not Allowed`);\\n        return;\\n    }\\n    const { _id } = req.body;\\n    console.log(\\\"_id\\\", _id);\\n    if (!_id) {\\n        res.status(400).json({\\n            error: \\\"Advisor ID is required\\\"\\n        });\\n        return;\\n    }\\n    const advisorDetails = await getAdvisorDetails(_id);\\n    if (advisorDetails) {\\n        res.status(200).json(advisorDetails);\\n    } else {\\n        res.status(404).json({\\n            error: \\\"Advisor not found\\\"\\n        });\\n    }\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2dldEFkdmlzb3JEZXRhaWxzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxrQ0FBa0M7QUFHYztBQUVoRCwwQkFBMEI7QUFDMUIsTUFBTUUsWUFBWUMsUUFBUUMsR0FBRyxDQUFDRixTQUFTO0FBQ3ZDLE1BQU1HLFVBQVU7QUFFaEIsZUFBZUM7SUFDYixNQUFNQyxTQUFTLElBQUlQLGdEQUFXQSxDQUFDRTtJQUMvQixNQUFNSyxPQUFPQyxPQUFPO0lBQ3BCLE1BQU1DLEtBQUtGLE9BQU9FLEVBQUUsQ0FBQ0o7SUFDckIsT0FBTztRQUFFSTtRQUFJRjtJQUFPO0FBQ3RCO0FBRUEsZUFBZUcsa0JBQWtCQyxTQUFpQjtJQUNoRCxNQUFNLEVBQUVGLEVBQUUsRUFBRUYsTUFBTSxFQUFFLEdBQUcsTUFBTUQ7SUFFN0IsSUFBSTtRQUNGLE1BQU1NLFVBQVUsTUFBTUgsR0FDbkJJLFVBQVUsQ0FBQyxnQkFDWEMsSUFBSSxDQUFDO1lBQUVDLEtBQUssSUFBSWQsNkNBQVFBLENBQUNVO1FBQVcsR0FDcENLLE9BQU87UUFDVixJQUFJLENBQUNKLFNBQVM7WUFDWixPQUFPO1FBQ1Q7UUFFQSxNQUFNSyxnQkFBZ0JMLE9BQU8sQ0FBQyxFQUFFLENBQUNNLFdBQVcsQ0FBQ0MsR0FBRyxDQUM5QyxDQUFDQyxLQUFlLElBQUluQiw2Q0FBUUEsQ0FBQ21CO1FBRS9CLE1BQU1GLGNBQWMsTUFBTVQsR0FDdkJJLFVBQVUsQ0FBQyxlQUNYQyxJQUFJLENBQUM7WUFDSkMsS0FBSztnQkFBRU0sS0FBS0o7WUFBYztRQUM1QixHQUNDRCxPQUFPO1FBRVYsa0NBQWtDO1FBQ2xDLE1BQU1NLGNBQWMsRUFBRTtRQUN0QixNQUFNQyxXQUFXLEVBQUU7UUFFbkIsS0FBSyxNQUFNQyxRQUFRTixZQUFhO1lBQzlCSSxZQUFZRyxJQUFJLElBQUlELEtBQUtFLFNBQVMsQ0FBQ1AsR0FBRyxDQUFDLENBQUNDLEtBQU8sSUFBSW5CLDZDQUFRQSxDQUFDbUI7WUFD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QUlHLE1BQU0sQ0FBQyxLQUFLRyxJQUFJLENBQUNDO0lBQ3ZCLE9BQU87UUFDTFAsSUFBSUcsTUFBTSxDQUFDLEtBQUtHLElBQUksQ0FBQztZQUFFVixPQUFPO1FBQW9CO0lBQ3BEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25uZWN0ZWQtYWR2aXNvci8uL3NyYy9wYWdlcy9hcGkvZ2V0QWR2aXNvckRldGFpbHMudHN4P2EzOTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2dldEFkdmlzb3JEZXRhaWxzLnRzeFxuXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IE1vbmdvQ2xpZW50LCBPYmplY3RJZCB9IGZyb20gXCJtb25nb2RiXCI7XG5cbi8vIOeOr+Wig+WPmOmHj+S4reiOt+WPliBNb25nb0RCIOeahOi/nuaOpSBVUkxcbmNvbnN0IE1PTkdPX1VSTCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbmNvbnN0IERCX05BTUUgPSBcIkNvbm5lY3RlZEFkdmlzb3JcIjtcblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChNT05HT19VUkwpO1xuICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICBjb25zdCBkYiA9IGNsaWVudC5kYihEQl9OQU1FKTtcbiAgcmV0dXJuIHsgZGIsIGNsaWVudCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRBZHZpc29yRGV0YWlscyhhZHZpc29ySWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRiLCBjbGllbnQgfSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBhZHZpc29yID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwiQWR2aXNvclRhYmxlXCIpXG4gICAgICAuZmluZCh7IF9pZDogbmV3IE9iamVjdElkKGFkdmlzb3JJZCkgfSlcbiAgICAgIC50b0FycmF5KCk7XG4gICAgaWYgKCFhZHZpc29yKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb25uZWN0aW9uSWRzID0gYWR2aXNvclswXS5jb25uZWN0aW9ucy5tYXAoXG4gICAgICAoaWQ6IHN0cmluZykgPT4gbmV3IE9iamVjdElkKGlkKVxuICAgICk7XG4gICAgY29uc3QgY29ubmVjdGlvbnMgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJjb25uZWN0aW9uc1wiKVxuICAgICAgLmZpbmQoe1xuICAgICAgICBfaWQ6IHsgJGluOiBjb25uZWN0aW9uSWRzIH0sXG4gICAgICB9KVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIC8vIOmmluWFiOaUtumbhuaJgOaciemcgOimgeafpeivoueahHJlbGF0aW9uIElE5ZKMcGFwZXIgSURcbiAgICBjb25zdCByZWxhdGlvbklkcyA9IFtdO1xuICAgIGNvbnN0IHBhcGVySWRzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGNvbm4gb2YgY29ubmVjdGlvbnMpIHtcbiAgICAgIHJlbGF0aW9uSWRzLnB1c2goLi4uY29ubi5yZWxhdGlvbnMubWFwKChpZCkgPT4gbmV3IE9iamVjdElkKGlkKSkpO1xuICAgICAgcGFwZXJJZHMucHVzaChcbiAgICAgICAgLi4uY29ubltcImNvbGxhYm9yYXRlLXBhcGVyc1wiXS5tYXAoKHBhcGVyKSA9PiBuZXcgT2JqZWN0SWQocGFwZXIpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyDkvb/nlKggJGluIOaTjeS9nOespuS4gOasoeaAp+afpeivouaJgOaciXJlbGF0aW9uc1xuICAgIGNvbnN0IHJlbGF0aW9ucyA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcInJlbGF0aW9uc1wiKVxuICAgICAgLmZpbmQoe1xuICAgICAgICBfaWQ6IHsgJGluOiByZWxhdGlvbklkcyB9LFxuICAgICAgfSlcbiAgICAgIC50b0FycmF5KCk7XG5cbiAgICBjb25zb2xlLmxvZyhcInJlbGF0aW9uc1wiLCByZWxhdGlvbnMpO1xuXG4gICAgLy8g5L2/55SoICRpbiDmk43kvZznrKbkuIDmrKHmgKfmn6Xor6LmiYDmnIlwYXBlcnNcbiAgICBjb25zdCBwYXBlcnMgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ0bXAtcGFwZXJzXCIpXG4gICAgICAuZmluZCh7XG4gICAgICAgIF9pZDogeyAkaW46IHBhcGVySWRzIH0sXG4gICAgICB9KVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIGNvbnNvbGUubG9nKFwicGFwZXJzXCIsIHBhcGVycyk7XG5cbiAgICBsZXQgZmluYWxDb25uZWN0aW9ucyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjb25uIG9mIGNvbm5lY3Rpb25zKSB7XG4gICAgICBjb25zdCByZWxhdGlvbkRldGFpbHMgPSBjb25uLnJlbGF0aW9ucy5tYXAoKHJlbElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgLy8g5Zyo5bey5p+l6K+i55qE5YWz57O75pWw57uE5Lit5om+5Yiw5Yy56YWN55qE5YWz57O75a+56LGhXG4gICAgICAgIGNvbnN0IHJlbCA9IHJlbGF0aW9ucy5maW5kKChyZWxhdGlvbikgPT4gcmVsYXRpb24uX2lkLmVxdWFscyhyZWxJZCkpO1xuICAgICAgICBpZiAoIXJlbCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWxbXCJpZC0xXCJdID09PSBhZHZpc29ySWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xhc3M6IHJlbC50eXBlLFxuICAgICAgICAgICAgcm9sZTogcmVsW1wicm9sZS0xXCJdLFxuICAgICAgICAgICAgZHVyYXRpb246IHJlbC5kdXJhdGlvbixcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbGFzczogcmVsLnR5cGUsXG4gICAgICAgICAgICByb2xlOiByZWxbXCJyb2xlLTJcIl0sXG4gICAgICAgICAgICBkdXJhdGlvbjogcmVsLmR1cmF0aW9uLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgY29sbGFib3JhdGVEZXRhaWxzID0gY29ubltcImNvbGxhYm9yYXRlLXBhcGVyc1wiXS5tYXAoXG4gICAgICAgIChwYXBlcklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAoIXBhcGVySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXBlciA9IHBhcGVycy5maW5kKChwYXBlcikgPT4gcGFwZXIuX2lkLmVxdWFscyhwYXBlcklkKSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcGVybmFtZTogcGFwZXI/Lm5hbWUsXG4gICAgICAgICAgICB5ZWFyOiBwYXBlcj8ueWVhcixcbiAgICAgICAgICAgIHVybDogcGFwZXI/LnVybCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBsZXQgY29ubmVjdGVkX2Fkdmlzb3JfaWQ7XG5cbiAgICAgIGlmIChjb25uW1wiaWQtMVwiXSA9PT0gYWR2aXNvcklkKSB7XG4gICAgICAgIGNvbm5lY3RlZF9hZHZpc29yX2lkID0gY29ubltcImlkLTJcIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25uZWN0ZWRfYWR2aXNvcl9pZCA9IGNvbm5bXCJpZC0xXCJdO1xuICAgICAgfVxuXG4gICAgICBsZXQgdG1wID0ge1xuICAgICAgICBfaWQ6IGNvbm5lY3RlZF9hZHZpc29yX2lkLFxuICAgICAgICByZWxhdGlvbjogcmVsYXRpb25EZXRhaWxzLFxuICAgICAgICBjb2xsYWJvcmF0aW9uczogY29sbGFib3JhdGVEZXRhaWxzLFxuICAgICAgICBsYXN0ZXN0Q29sbGFib3JhdGlvbjogTWF0aC5tYXgoXG4gICAgICAgICAgLi4uY29sbGFib3JhdGVEZXRhaWxzLm1hcCgoY29sbGFiOiBhbnkpID0+IGNvbGxhYi55ZWFyKVxuICAgICAgICApXG4gICAgICAgICAgPyBNYXRoLm1heCguLi5jb2xsYWJvcmF0ZURldGFpbHMubWFwKChjb2xsYWI6IGFueSkgPT4gY29sbGFiLnllYXIpKVxuICAgICAgICAgIDogMjAyNCwgLy8gVE9ET1xuICAgICAgICByZWxhdGlvbkZhY3RvcjogMSxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0bXBbXCJsYXN0ZXN0Q29sbGFib3JhdGlvblwiXSA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgIHRtcFtcImxhc3Rlc3RDb2xsYWJvcmF0aW9uXCJdID0gMjAyNDtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coXCJ0bXBcIiwgdG1wKTtcblxuICAgICAgZmluYWxDb25uZWN0aW9ucy5wdXNoKHRtcCk7XG4gICAgfVxuXG4gICAgbGV0IGZpbmFsQWR2aXNvciA9IHtcbiAgICAgIF9pZDogYWR2aXNvclswXS5faWQsXG4gICAgICBuYW1lOiBhZHZpc29yWzBdLm5hbWUsXG4gICAgICB0YWdzOiBhZHZpc29yWzBdLnRhZ3MsXG4gICAgICBhZmZpbGlhdGlvbjogYWR2aXNvclswXS5hZmZpbGlhdGlvbixcbiAgICAgIHBvc2l0aW9uOiBhZHZpc29yWzBdLnBvc2l0aW9uLFxuICAgICAgY29ubmVjdGlvbnM6IGZpbmFsQ29ubmVjdGlvbnMsXG4gICAgICBhdmF0YXI6IGFkdmlzb3JbMF0ucGljdHVyZSxcbiAgICAgIHR3aXR0ZXI6IGFkdmlzb3JbMF0uY29udGFjdHMudHdpdHRlcixcbiAgICAgIGVtYWlsOiBhZHZpc29yWzBdLmNvbnRhY3RzLmVtYWlsLFxuICAgICAgaG9tZXBhZ2U6IGFkdmlzb3JbMF0uaG9tZXBhZ2UsXG4gICAgICBnaXRodWI6IGFkdmlzb3JbMF0uY29udGFjdHMuZ2l0aHViLFxuICAgICAgZGVzY3JpcHRpb246IGFkdmlzb3JbMF0uZGVzY3JpcHRpb25zLFxuICAgIH07XG4gICAgcmV0dXJuIGZpbmFsQWR2aXNvcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgYWR2aXNvciBkZXRhaWxzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LmNsb3NlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2Vcbikge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpIHtcbiAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgW1wiUE9TVFwiXSk7XG4gICAgcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB7IF9pZCB9ID0gcmVxLmJvZHk7XG4gIGNvbnNvbGUubG9nKFwiX2lkXCIsIF9pZCk7XG4gIGlmICghX2lkKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJBZHZpc29yIElEIGlzIHJlcXVpcmVkXCIgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgYWR2aXNvckRldGFpbHMgPSBhd2FpdCBnZXRBZHZpc29yRGV0YWlscyhfaWQpO1xuICBpZiAoYWR2aXNvckRldGFpbHMpIHtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihhZHZpc29yRGV0YWlscyk7XG4gIH0gZWxzZSB7XG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBZHZpc29yIG5vdCBmb3VuZFwiIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJPYmplY3RJZCIsIk1PTkdPX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJEQl9OQU1FIiwiY29ubmVjdFRvRGF0YWJhc2UiLCJjbGllbnQiLCJjb25uZWN0IiwiZGIiLCJnZXRBZHZpc29yRGV0YWlscyIsImFkdmlzb3JJZCIsImFkdmlzb3IiLCJjb2xsZWN0aW9uIiwiZmluZCIsIl9pZCIsInRvQXJyYXkiLCJjb25uZWN0aW9uSWRzIiwiY29ubmVjdGlvbnMiLCJtYXAiLCJpZCIsIiRpbiIsInJlbGF0aW9uSWRzIiwicGFwZXJJZHMiLCJjb25uIiwicHVzaCIsInJlbGF0aW9ucyIsInBhcGVyIiwiY29uc29sZSIsImxvZyIsInBhcGVycyIsImZpbmFsQ29ubmVjdGlvbnMiLCJyZWxhdGlvbkRldGFpbHMiLCJyZWxJZCIsInJlbCIsInJlbGF0aW9uIiwiZXF1YWxzIiwiY2xhc3MiLCJ0eXBlIiwicm9sZSIsImR1cmF0aW9uIiwiY29sbGFib3JhdGVEZXRhaWxzIiwicGFwZXJJZCIsInBhcGVybmFtZSIsIm5hbWUiLCJ5ZWFyIiwidXJsIiwiY29ubmVjdGVkX2Fkdmlzb3JfaWQiLCJ0bXAiLCJjb2xsYWJvcmF0aW9ucyIsImxhc3Rlc3RDb2xsYWJvcmF0aW9uIiwiTWF0aCIsIm1heCIsImNvbGxhYiIsInJlbGF0aW9uRmFjdG9yIiwiSW5maW5pdHkiLCJmaW5hbEFkdmlzb3IiLCJ0YWdzIiwiYWZmaWxpYXRpb24iLCJwb3NpdGlvbiIsImF2YXRhciIsInBpY3R1cmUiLCJ0d2l0dGVyIiwiY29udGFjdHMiLCJlbWFpbCIsImhvbWVwYWdlIiwiZ2l0aHViIiwiZGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbnMiLCJlcnJvciIsImNsb3NlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInNldEhlYWRlciIsInN0YXR1cyIsImVuZCIsImJvZHkiLCJqc29uIiwiYWR2aXNvckRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/getAdvisorDetails.tsx\\n\");\n-\n-/***/ })\n-\n-};\n-;\n-\n-// load runtime\n-var __webpack_require__ = require(\"../../webpack-api-runtime.js\");\n-__webpack_require__.C(exports);\n-var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))\n-var __webpack_exports__ = __webpack_require__.X(0, [\"vendor-chunks/next\"], () => (__webpack_exec__(\"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\")));\n-module.exports = __webpack_exports__;\n-\n-})();\n+        /***/\n+      },\n+  };\n+  // load runtime\n+  var __webpack_require__ = require(\"../../webpack-api-runtime.js\");\n+  __webpack_require__.C(exports);\n+  var __webpack_exec__ = (moduleId) =>\n+    __webpack_require__((__webpack_require__.s = moduleId));\n+  var __webpack_exports__ = __webpack_require__.X(\n+    0,\n+    [\"vendor-chunks/next\"],\n+    () =>\n+      __webpack_exec__(\n+        \"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\"\n+      )\n+  );\n+  module.exports = __webpack_exports__;\n+})();\n"
                }
            ],
            "date": 1713787107924,
            "name": "Commit-0",
            "content": "\"use strict\";\n/*\n * ATTENTION: An \"eval-source-map\" devtool has been used.\n * This devtool is neither made for production nor for readable output files.\n * It uses \"eval()\" calls to create a separate source file with attached SourceMaps in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with \"devtool: false\".\n * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n */\n(() => {\nvar exports = {};\nexports.id = \"pages/api/getAdvisorDetails\";\nexports.ids = [\"pages/api/getAdvisorDetails\"];\nexports.modules = {\n\n/***/ \"mongodb\":\n/*!**************************!*\\\n  !*** external \"mongodb\" ***!\n  \\**************************/\n/***/ ((module) => {\n\nmodule.exports = require(\"mongodb\");\n\n/***/ }),\n\n/***/ \"next/dist/compiled/next-server/pages-api.runtime.dev.js\":\n/*!**************************************************************************!*\\\n  !*** external \"next/dist/compiled/next-server/pages-api.runtime.dev.js\" ***!\n  \\**************************************************************************/\n/***/ ((module) => {\n\nmodule.exports = require(\"next/dist/compiled/next-server/pages-api.runtime.dev.js\");\n\n/***/ }),\n\n/***/ \"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\":\n/*!***********************************************************************************************************************************************************************************************************************************************!*\\\n  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D! ***!\n  \\***********************************************************************************************************************************************************************************************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   config: () => (/* binding */ config),\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__),\\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\\n/* harmony export */ });\\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \\\"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\\\");\\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \\\"(api)/./node_modules/next/dist/server/future/route-kind.js\\\");\\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \\\"(api)/./node_modules/next/dist/build/templates/helpers.js\\\");\\n/* harmony import */ var _src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/getAdvisorDetails.tsx */ \\\"(api)/./src/pages/api/getAdvisorDetails.tsx\\\");\\n\\n\\n\\n// Import the userland code.\\n\\n// Re-export the handler (should be the default export).\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__, \\\"default\\\"));\\n// Re-export config.\\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__, \\\"config\\\");\\n// Create and export the route module that will be consumed.\\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\\n    definition: {\\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\\n        page: \\\"/api/getAdvisorDetails\\\",\\n        pathname: \\\"/api/getAdvisorDetails\\\",\\n        // The following aren't used in production.\\n        bundlePath: \\\"\\\",\\n        filename: \\\"\\\"\\n    },\\n    userland: _src_pages_api_getAdvisorDetails_tsx__WEBPACK_IMPORTED_MODULE_3__\\n});\\n\\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdldEFkdmlzb3JEZXRhaWxzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZnZXRBZHZpc29yRGV0YWlscy50c3gmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDa0U7QUFDbEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25uZWN0ZWQtYWR2aXNvci8/ZTBjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9nZXRBZHZpc29yRGV0YWlscy50c3hcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZXRBZHZpc29yRGV0YWlsc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dldEFkdmlzb3JEZXRhaWxzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\\n\");\n\n/***/ }),\n\n/***/ \"(api)/./src/pages/api/getAdvisorDetails.tsx\":\n/*!*********************************************!*\\\n  !*** ./src/pages/api/getAdvisorDetails.tsx ***!\n  \\*********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (/* binding */ handler)\\n/* harmony export */ });\\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \\\"mongodb\\\");\\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\\n// pages/api/getAdvisorDetails.tsx\\n\\n// 环境变量中获取 MongoDB 的连接 URL\\nconst MONGO_URL = process.env.MONGO_URL;\\nconst DB_NAME = \\\"ConnectedAdvisor\\\";\\nasync function connectToDatabase() {\\n    const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(MONGO_URL);\\n    await client.connect();\\n    const db = client.db(DB_NAME);\\n    return {\\n        db,\\n        client\\n    };\\n}\\nasync function getAdvisorDetails(advisorId) {\\n    const { db, client } = await connectToDatabase();\\n    try {\\n        const advisor = await db.collection(\\\"AdvisorTable\\\").find({\\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(advisorId)\\n        }).toArray();\\n        if (!advisor) {\\n            return null;\\n        }\\n        const connectionIds = advisor[0].connections.map((id)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id));\\n        const connections = await db.collection(\\\"connections\\\").find({\\n            _id: {\\n                $in: connectionIds\\n            }\\n        }).toArray();\\n        // 首先收集所有需要查询的relation ID和paper ID\\n        const relationIds = [];\\n        const paperIds = [];\\n        for (const conn of connections){\\n            relationIds.push(...conn.relations.map((id)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)));\\n            paperIds.push(...conn[\\\"collaborate-papers\\\"].map((paper)=>new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(paper)));\\n        }\\n        // 使用 $in 操作符一次性查询所有relations\\n        const relations = await db.collection(\\\"relations\\\").find({\\n            _id: {\\n                $in: relationIds\\n            }\\n        }).toArray();\\n        console.log(\\\"relations\\\", relations);\\n        // 使用 $in 操作符一次性查询所有papers\\n        const papers = await db.collection(\\\"tmp-papers\\\").find({\\n            _id: {\\n                $in: paperIds\\n            }\\n        }).toArray();\\n        console.log(\\\"papers\\\", papers);\\n        let finalConnections = [];\\n        for (const conn of connections){\\n            const relationDetails = conn.relations.map((relId)=>{\\n                // 在已查询的关系数组中找到匹配的关系对象\\n                const rel = relations.find((relation)=>relation._id.equals(relId));\\n                if (!rel) {\\n                    return null;\\n                }\\n                if (rel[\\\"id-1\\\"] === advisorId) {\\n                    return {\\n                        class: rel.type,\\n                        role: rel[\\\"role-1\\\"],\\n                        duration: rel.duration\\n                    };\\n                } else {\\n                    return {\\n                        class: rel.type,\\n                        role: rel[\\\"role-2\\\"],\\n                        duration: rel.duration\\n                    };\\n                }\\n            });\\n            const collaborateDetails = conn[\\\"collaborate-papers\\\"].map((paperId)=>{\\n                if (!paperId) {\\n                    return null;\\n                }\\n                const paper = papers.find((paper)=>paper._id.equals(paperId));\\n                return {\\n                    papername: paper?.name,\\n                    year: paper?.year,\\n                    url: paper?.url\\n                };\\n            });\\n            let connected_advisor_id;\\n            if (conn[\\\"id-1\\\"] === advisorId) {\\n                connected_advisor_id = conn[\\\"id-2\\\"];\\n            } else {\\n                connected_advisor_id = conn[\\\"id-1\\\"];\\n            }\\n            let tmp = {\\n                _id: connected_advisor_id,\\n                relation: relationDetails,\\n                collaborations: collaborateDetails,\\n                lastestCollaboration: Math.max(...collaborateDetails.map((collab)=>collab.year)) ? Math.max(...collaborateDetails.map((collab)=>collab.year)) : 2024,\\n                relationFactor: 1\\n            };\\n            if (tmp[\\\"lastestCollaboration\\\"] === -Infinity) {\\n                tmp[\\\"lastestCollaboration\\\"] = 2024;\\n            }\\n            console.log(\\\"tmp\\\", tmp);\\n            finalConnections.push(tmp);\\n        }\\n        let finalAdvisor = {\\n            _id: advisor[0]._id,\\n            name: advisor[0].name,\\n            tags: advisor[0].tags,\\n            affiliation: advisor[0].affiliation,\\n            position: advisor[0].position,\\n            connections: finalConnections,\\n            avatar: advisor[0].picture,\\n            twitter: advisor[0].contacts.twitter,\\n            email: advisor[0].contacts.email,\\n            homepage: advisor[0].homepage,\\n            github: advisor[0].contacts.github,\\n            description: advisor[0].descriptions\\n        };\\n        return finalAdvisor;\\n    } catch (error) {\\n        console.error(\\\"Error fetching advisor details:\\\", error);\\n        return null;\\n    } finally{\\n        client.close();\\n    }\\n}\\nasync function handler(req, res) {\\n    if (req.method !== \\\"POST\\\") {\\n        res.setHeader(\\\"Allow\\\", [\\n            \\\"POST\\\"\\n        ]);\\n        res.status(405).end(`Method ${req.method} Not Allowed`);\\n        return;\\n    }\\n    const { _id } = req.body;\\n    console.log(\\\"_id\\\", _id);\\n    if (!_id) {\\n        res.status(400).json({\\n            error: \\\"Advisor ID is required\\\"\\n        });\\n        return;\\n    }\\n    const advisorDetails = await getAdvisorDetails(_id);\\n    if (advisorDetails) {\\n        res.status(200).json(advisorDetails);\\n    } else {\\n        res.status(404).json({\\n            error: \\\"Advisor not found\\\"\\n        });\\n    }\\n}\\n//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2dldEFkdmlzb3JEZXRhaWxzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxrQ0FBa0M7QUFHYztBQUVoRCwwQkFBMEI7QUFDMUIsTUFBTUUsWUFBWUMsUUFBUUMsR0FBRyxDQUFDRixTQUFTO0FBQ3ZDLE1BQU1HLFVBQVU7QUFFaEIsZUFBZUM7SUFDYixNQUFNQyxTQUFTLElBQUlQLGdEQUFXQSxDQUFDRTtJQUMvQixNQUFNSyxPQUFPQyxPQUFPO0lBQ3BCLE1BQU1DLEtBQUtGLE9BQU9FLEVBQUUsQ0FBQ0o7SUFDckIsT0FBTztRQUFFSTtRQUFJRjtJQUFPO0FBQ3RCO0FBRUEsZUFBZUcsa0JBQWtCQyxTQUFpQjtJQUNoRCxNQUFNLEVBQUVGLEVBQUUsRUFBRUYsTUFBTSxFQUFFLEdBQUcsTUFBTUQ7SUFFN0IsSUFBSTtRQUNGLE1BQU1NLFVBQVUsTUFBTUgsR0FDbkJJLFVBQVUsQ0FBQyxnQkFDWEMsSUFBSSxDQUFDO1lBQUVDLEtBQUssSUFBSWQsNkNBQVFBLENBQUNVO1FBQVcsR0FDcENLLE9BQU87UUFDVixJQUFJLENBQUNKLFNBQVM7WUFDWixPQUFPO1FBQ1Q7UUFFQSxNQUFNSyxnQkFBZ0JMLE9BQU8sQ0FBQyxFQUFFLENBQUNNLFdBQVcsQ0FBQ0MsR0FBRyxDQUM5QyxDQUFDQyxLQUFlLElBQUluQiw2Q0FBUUEsQ0FBQ21CO1FBRS9CLE1BQU1GLGNBQWMsTUFBTVQsR0FDdkJJLFVBQVUsQ0FBQyxlQUNYQyxJQUFJLENBQUM7WUFDSkMsS0FBSztnQkFBRU0sS0FBS0o7WUFBYztRQUM1QixHQUNDRCxPQUFPO1FBRVYsa0NBQWtDO1FBQ2xDLE1BQU1NLGNBQWMsRUFBRTtRQUN0QixNQUFNQyxXQUFXLEVBQUU7UUFFbkIsS0FBSyxNQUFNQyxRQUFRTixZQUFhO1lBQzlCSSxZQUFZRyxJQUFJLElBQUlELEtBQUtFLFNBQVMsQ0FBQ1AsR0FBRyxDQUFDLENBQUNDLEtBQU8sSUFBSW5CLDZDQUFRQSxDQUFDbUI7WUFD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QUlHLE1BQU0sQ0FBQyxLQUFLRyxJQUFJLENBQUNDO0lBQ3ZCLE9BQU87UUFDTFAsSUFBSUcsTUFBTSxDQUFDLEtBQUtHLElBQUksQ0FBQztZQUFFVixPQUFPO1FBQW9CO0lBQ3BEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25uZWN0ZWQtYWR2aXNvci8uL3NyYy9wYWdlcy9hcGkvZ2V0QWR2aXNvckRldGFpbHMudHN4P2EzOTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2dldEFkdmlzb3JEZXRhaWxzLnRzeFxuXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IE1vbmdvQ2xpZW50LCBPYmplY3RJZCB9IGZyb20gXCJtb25nb2RiXCI7XG5cbi8vIOeOr+Wig+WPmOmHj+S4reiOt+WPliBNb25nb0RCIOeahOi/nuaOpSBVUkxcbmNvbnN0IE1PTkdPX1VSTCA9IHByb2Nlc3MuZW52Lk1PTkdPX1VSTDtcbmNvbnN0IERCX05BTUUgPSBcIkNvbm5lY3RlZEFkdmlzb3JcIjtcblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChNT05HT19VUkwpO1xuICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICBjb25zdCBkYiA9IGNsaWVudC5kYihEQl9OQU1FKTtcbiAgcmV0dXJuIHsgZGIsIGNsaWVudCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRBZHZpc29yRGV0YWlscyhhZHZpc29ySWQ6IHN0cmluZykge1xuICBjb25zdCB7IGRiLCBjbGllbnQgfSA9IGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBhZHZpc29yID0gYXdhaXQgZGJcbiAgICAgIC5jb2xsZWN0aW9uKFwiQWR2aXNvclRhYmxlXCIpXG4gICAgICAuZmluZCh7IF9pZDogbmV3IE9iamVjdElkKGFkdmlzb3JJZCkgfSlcbiAgICAgIC50b0FycmF5KCk7XG4gICAgaWYgKCFhZHZpc29yKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb25uZWN0aW9uSWRzID0gYWR2aXNvclswXS5jb25uZWN0aW9ucy5tYXAoXG4gICAgICAoaWQ6IHN0cmluZykgPT4gbmV3IE9iamVjdElkKGlkKVxuICAgICk7XG4gICAgY29uc3QgY29ubmVjdGlvbnMgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJjb25uZWN0aW9uc1wiKVxuICAgICAgLmZpbmQoe1xuICAgICAgICBfaWQ6IHsgJGluOiBjb25uZWN0aW9uSWRzIH0sXG4gICAgICB9KVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIC8vIOmmluWFiOaUtumbhuaJgOaciemcgOimgeafpeivoueahHJlbGF0aW9uIElE5ZKMcGFwZXIgSURcbiAgICBjb25zdCByZWxhdGlvbklkcyA9IFtdO1xuICAgIGNvbnN0IHBhcGVySWRzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGNvbm4gb2YgY29ubmVjdGlvbnMpIHtcbiAgICAgIHJlbGF0aW9uSWRzLnB1c2goLi4uY29ubi5yZWxhdGlvbnMubWFwKChpZCkgPT4gbmV3IE9iamVjdElkKGlkKSkpO1xuICAgICAgcGFwZXJJZHMucHVzaChcbiAgICAgICAgLi4uY29ubltcImNvbGxhYm9yYXRlLXBhcGVyc1wiXS5tYXAoKHBhcGVyKSA9PiBuZXcgT2JqZWN0SWQocGFwZXIpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyDkvb/nlKggJGluIOaTjeS9nOespuS4gOasoeaAp+afpeivouaJgOaciXJlbGF0aW9uc1xuICAgIGNvbnN0IHJlbGF0aW9ucyA9IGF3YWl0IGRiXG4gICAgICAuY29sbGVjdGlvbihcInJlbGF0aW9uc1wiKVxuICAgICAgLmZpbmQoe1xuICAgICAgICBfaWQ6IHsgJGluOiByZWxhdGlvbklkcyB9LFxuICAgICAgfSlcbiAgICAgIC50b0FycmF5KCk7XG5cbiAgICBjb25zb2xlLmxvZyhcInJlbGF0aW9uc1wiLCByZWxhdGlvbnMpO1xuXG4gICAgLy8g5L2/55SoICRpbiDmk43kvZznrKbkuIDmrKHmgKfmn6Xor6LmiYDmnIlwYXBlcnNcbiAgICBjb25zdCBwYXBlcnMgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oXCJ0bXAtcGFwZXJzXCIpXG4gICAgICAuZmluZCh7XG4gICAgICAgIF9pZDogeyAkaW46IHBhcGVySWRzIH0sXG4gICAgICB9KVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIGNvbnNvbGUubG9nKFwicGFwZXJzXCIsIHBhcGVycyk7XG5cbiAgICBsZXQgZmluYWxDb25uZWN0aW9ucyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjb25uIG9mIGNvbm5lY3Rpb25zKSB7XG4gICAgICBjb25zdCByZWxhdGlvbkRldGFpbHMgPSBjb25uLnJlbGF0aW9ucy5tYXAoKHJlbElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgLy8g5Zyo5bey5p+l6K+i55qE5YWz57O75pWw57uE5Lit5om+5Yiw5Yy56YWN55qE5YWz57O75a+56LGhXG4gICAgICAgIGNvbnN0IHJlbCA9IHJlbGF0aW9ucy5maW5kKChyZWxhdGlvbikgPT4gcmVsYXRpb24uX2lkLmVxdWFscyhyZWxJZCkpO1xuICAgICAgICBpZiAoIXJlbCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWxbXCJpZC0xXCJdID09PSBhZHZpc29ySWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xhc3M6IHJlbC50eXBlLFxuICAgICAgICAgICAgcm9sZTogcmVsW1wicm9sZS0xXCJdLFxuICAgICAgICAgICAgZHVyYXRpb246IHJlbC5kdXJhdGlvbixcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbGFzczogcmVsLnR5cGUsXG4gICAgICAgICAgICByb2xlOiByZWxbXCJyb2xlLTJcIl0sXG4gICAgICAgICAgICBkdXJhdGlvbjogcmVsLmR1cmF0aW9uLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3QgY29sbGFib3JhdGVEZXRhaWxzID0gY29ubltcImNvbGxhYm9yYXRlLXBhcGVyc1wiXS5tYXAoXG4gICAgICAgIChwYXBlcklkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAoIXBhcGVySWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXBlciA9IHBhcGVycy5maW5kKChwYXBlcikgPT4gcGFwZXIuX2lkLmVxdWFscyhwYXBlcklkKSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcGVybmFtZTogcGFwZXI/Lm5hbWUsXG4gICAgICAgICAgICB5ZWFyOiBwYXBlcj8ueWVhcixcbiAgICAgICAgICAgIHVybDogcGFwZXI/LnVybCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBsZXQgY29ubmVjdGVkX2Fkdmlzb3JfaWQ7XG5cbiAgICAgIGlmIChjb25uW1wiaWQtMVwiXSA9PT0gYWR2aXNvcklkKSB7XG4gICAgICAgIGNvbm5lY3RlZF9hZHZpc29yX2lkID0gY29ubltcImlkLTJcIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25uZWN0ZWRfYWR2aXNvcl9pZCA9IGNvbm5bXCJpZC0xXCJdO1xuICAgICAgfVxuXG4gICAgICBsZXQgdG1wID0ge1xuICAgICAgICBhZHZpc29yX2lkOiBjb25uZWN0ZWRfYWR2aXNvcl9pZCxcbiAgICAgICAgcmVsYXRpb246IHJlbGF0aW9uRGV0YWlscyxcbiAgICAgICAgY29sbGFib3JhdGlvbnM6IGNvbGxhYm9yYXRlRGV0YWlscyxcbiAgICAgICAgbGFzdGVzdENvbGxhYm9yYXRpb246IE1hdGgubWF4KFxuICAgICAgICAgIC4uLmNvbGxhYm9yYXRlRGV0YWlscy5tYXAoKGNvbGxhYjogYW55KSA9PiBjb2xsYWIueWVhcilcbiAgICAgICAgKVxuICAgICAgICAgID8gTWF0aC5tYXgoLi4uY29sbGFib3JhdGVEZXRhaWxzLm1hcCgoY29sbGFiOiBhbnkpID0+IGNvbGxhYi55ZWFyKSlcbiAgICAgICAgICA6IDIwMjQsIC8vIFRPRE9cbiAgICAgICAgcmVsYXRpb25GYWN0b3I6IDEsXG4gICAgICB9O1xuXG4gICAgICBpZiAodG1wW1wibGFzdGVzdENvbGxhYm9yYXRpb25cIl0gPT09IC1JbmZpbml0eSkge1xuICAgICAgICB0bXBbXCJsYXN0ZXN0Q29sbGFib3JhdGlvblwiXSA9IDIwMjQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKFwidG1wXCIsIHRtcCk7XG5cbiAgICAgIGZpbmFsQ29ubmVjdGlvbnMucHVzaCh0bXApO1xuICAgIH1cblxuICAgIGxldCBmaW5hbEFkdmlzb3IgPSB7XG4gICAgICBhZHZpc29yX2lkOiBhZHZpc29yWzBdLl9pZCxcbiAgICAgIG5hbWU6IGFkdmlzb3JbMF0ubmFtZSxcbiAgICAgIHRhZ3M6IGFkdmlzb3JbMF0udGFncyxcbiAgICAgIGFmZmlsaWF0aW9uOiBhZHZpc29yWzBdLmFmZmlsaWF0aW9uLFxuICAgICAgcG9zaXRpb246IGFkdmlzb3JbMF0ucG9zaXRpb24sXG4gICAgICBjb25uZWN0aW9uczogZmluYWxDb25uZWN0aW9ucyxcbiAgICAgIGF2YXRhcjogYWR2aXNvclswXS5waWN0dXJlLFxuICAgICAgdHdpdHRlcjogYWR2aXNvclswXS5jb250YWN0cy50d2l0dGVyLFxuICAgICAgZW1haWw6IGFkdmlzb3JbMF0uY29udGFjdHMuZW1haWwsXG4gICAgICB3ZWJzaXRlOiBhZHZpc29yWzBdLmhvbWVwYWdlLFxuICAgICAgZ2l0aHViOiBhZHZpc29yWzBdLmNvbnRhY3RzLmdpdGh1YixcbiAgICAgIGRlc2NyaXB0aW9uOiBhZHZpc29yWzBdLmRlc2NyaXB0aW9ucyxcbiAgICB9O1xuICAgIHJldHVybiBmaW5hbEFkdmlzb3I7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGFkdmlzb3IgZGV0YWlsczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5jbG9zZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKSB7XG4gICAgcmVzLnNldEhlYWRlcihcIkFsbG93XCIsIFtcIlBPU1RcIl0pO1xuICAgIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgeyBhZHZpc29yX2lkIH0gPSByZXEuYm9keTtcbiAgY29uc29sZS5sb2coXCJhZHZpc29yX2lkXCIsIGFkdmlzb3JfaWQpO1xuICBpZiAoIWFkdmlzb3JfaWQpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkFkdmlzb3IgSUQgaXMgcmVxdWlyZWRcIiB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBhZHZpc29yRGV0YWlscyA9IGF3YWl0IGdldEFkdmlzb3JEZXRhaWxzKGFkdmlzb3JfaWQpO1xuICBpZiAoYWR2aXNvckRldGFpbHMpIHtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihhZHZpc29yRGV0YWlscyk7XG4gIH0gZWxzZSB7XG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJBZHZpc29yIG5vdCBmb3VuZFwiIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJPYmplY3RJZCIsIk1PTkdPX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJEQl9OQU1FIiwiY29ubmVjdFRvRGF0YWJhc2UiLCJjbGllbnQiLCJjb25uZWN0IiwiZGIiLCJnZXRBZHZpc29yRGV0YWlscyIsImFkdmlzb3JJZCIsImFkdmlzb3IiLCJjb2xsZWN0aW9uIiwiZmluZCIsIl9pZCIsInRvQXJyYXkiLCJjb25uZWN0aW9uSWRzIiwiY29ubmVjdGlvbnMiLCJtYXAiLCJpZCIsIiRpbiIsInJlbGF0aW9uSWRzIiwicGFwZXJJZHMiLCJjb25uIiwicHVzaCIsInJlbGF0aW9ucyIsInBhcGVyIiwiY29uc29sZSIsImxvZyIsInBhcGVycyIsImZpbmFsQ29ubmVjdGlvbnMiLCJyZWxhdGlvbkRldGFpbHMiLCJyZWxJZCIsInJlbCIsInJlbGF0aW9uIiwiZXF1YWxzIiwiY2xhc3MiLCJ0eXBlIiwicm9sZSIsImR1cmF0aW9uIiwiY29sbGFib3JhdGVEZXRhaWxzIiwicGFwZXJJZCIsInBhcGVybmFtZSIsIm5hbWUiLCJ5ZWFyIiwidXJsIiwiY29ubmVjdGVkX2Fkdmlzb3JfaWQiLCJ0bXAiLCJhZHZpc29yX2lkIiwiY29sbGFib3JhdGlvbnMiLCJsYXN0ZXN0Q29sbGFib3JhdGlvbiIsIk1hdGgiLCJtYXgiLCJjb2xsYWIiLCJyZWxhdGlvbkZhY3RvciIsIkluZmluaXR5IiwiZmluYWxBZHZpc29yIiwidGFncyIsImFmZmlsaWF0aW9uIiwicG9zaXRpb24iLCJhdmF0YXIiLCJwaWN0dXJlIiwidHdpdHRlciIsImNvbnRhY3RzIiwiZW1haWwiLCJ3ZWJzaXRlIiwiaG9tZXBhZ2UiLCJnaXRodWIiLCJkZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9ucyIsImVycm9yIiwiY2xvc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiZW5kIiwiYm9keSIsImpzb24iLCJhZHZpc29yRGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/getAdvisorDetails.tsx\\n\");\n\n/***/ })\n\n};\n;\n\n// load runtime\nvar __webpack_require__ = require(\"../../webpack-api-runtime.js\");\n__webpack_require__.C(exports);\nvar __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))\nvar __webpack_exports__ = __webpack_require__.X(0, [\"vendor-chunks/next\"], () => (__webpack_exec__(\"(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2FgetAdvisorDetails&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2FgetAdvisorDetails.tsx&middlewareConfigBase64=e30%3D!\")));\nmodule.exports = __webpack_exports__;\n\n})();"
        }
    ]
}